# TexCut - Blender Add-on

> **Note:** This project was generated by Claude (Anthropic AI) on behalf of the repository owner.

TexCut creates optimized 2D meshes from images with transparency by following the outline of non-transparent pixels. This significantly reduces pixel overdraw compared to standard quad meshes, making it ideal for scenes with lots of overlapping alpha-masked objects like forests, grass, and foliage.

## Features

- Analyzes image alpha channel to detect non-transparent regions
- Generates mesh geometry that follows the transparency outline
- Automatically applies the image as a texture with proper alpha blending
- Maintains image aspect ratio
- Simple one-click operation from the Blender sidebar

## Installation

1. Download or clone this repository
2. In Blender, go to `Edit > Preferences > Add-ons`
3. Click `Install...` and select the `__init__.py` file (or the entire `texcut` folder if zipped)
4. Enable the add-on by checking the checkbox next to "Mesh: TexCut"

## Requirements

This add-on requires the following Python packages:
- `numpy` (usually included with Blender)
- `Pillow` (PIL) (usually included with Blender)
- `opencv-python` (needs installation)
- `shapely` (required for HIGH quality mode)

### Required: OpenCV Installation

OpenCV needs to be installed in Blender's Python environment:

```bash
# On macOS
/Applications/Blender.app/Contents/Resources/4.0/python/bin/python3.11 -m pip install opencv-python

# On Linux
/path/to/blender/python/bin/python -m pip install opencv-python

# On Windows
"C:\Program Files\Blender Foundation\Blender\4.0\4.0\python\bin\python.exe" -m pip install opencv-python
```

### Optional but Recommended: Shapely Installation

**Shapely is REQUIRED for HIGH quality mesh generation.** Without it, you can only use LOW and MEDIUM quality presets.

```bash
# On macOS
/Applications/Blender.app/Contents/Resources/4.0/python/bin/python3.11 -m pip install shapely

# On Windows
"C:\Program Files\Blender Foundation\Blender\4.0\4.0\python\bin\python.exe" -m pip install shapely

# On Linux
/path/to/blender/python/bin/python -m pip install shapely
```

See [INSTALL_SHAPELY.md](INSTALL_SHAPELY.md) for detailed installation instructions and troubleshooting.

**Note:** Adjust the Blender version number (4.0) in the path to match your installed version.

## Usage

1. Open Blender and locate the **TexCut** tab in the 3D Viewport sidebar (press `N` to toggle sidebar)
2. Click the **"Create Mesh from Image"** button
3. Browse and select an image file with transparency (PNG recommended)
4. The add-on will:
   - Analyze the alpha channel
   - Generate an optimized mesh following the non-transparent regions
   - Apply the image as a texture with proper alpha blending
   - Add the mesh to your scene

## Benefits

### Reduced Pixel Overdraw
Standard quad meshes render all pixels, including fully transparent ones. TexCut's outline-based meshes only render visible pixels, which can significantly improve performance in scenes with:
- Dense forests and vegetation
- Overlapping foliage cards
- Particle systems with alpha-masked textures
- Billboard sprites

### Performance Impact
In scenes with many overlapping transparent objects, reducing overdraw can lead to:
- Faster rendering times
- Better GPU performance
- Reduced memory bandwidth usage
- Smoother viewport performance

## Technical Details

The add-on works by:
1. Loading the image and extracting the alpha channel
2. Creating a binary mask based on an alpha threshold
3. Detecting edge pixels that border transparent areas
4. Generating mesh geometry from the outline points
5. Creating UV coordinates for proper texture mapping
6. Setting up a shader node tree with alpha blending

## Limitations

- Current version creates a simplified mesh outline; very complex shapes may not be perfectly traced
- Works best with images that have clear transparent/opaque boundaries
- Very detailed outlines may still generate many vertices

## License

This add-on is provided as-is for use in your Blender projects.

## Contributing

Contributions, bug reports, and feature requests are welcome!

## Version History

- **1.0.0** - Initial release
  - Basic alpha channel analysis
  - Mesh generation with texture application
  - Simple UI panel
